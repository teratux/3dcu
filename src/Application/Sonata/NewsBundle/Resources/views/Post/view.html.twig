{% extends "@SyliusShop/layout.html.twig" %}

{% block title %}
    {{ post.title }}
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('build/static/fontawesome/css/font-awesome.css')}}">
    <link rel="stylesheet" href="{{ asset('build/static/mediumish/css/screen.css')}}">
    <link rel="stylesheet" href="{{ asset('build/static/mediumish/css/main.css')}}">
{% endblock %}

{% block sonata_page_breadcrumb %}
    <div class="row-fluid clearfix">
        {{ sonata_block_render_event('breadcrumb', { 'context': 'news_post', 'post': post, 'current_uri': app.request.requestUri }) }}
    </div>
{% endblock %}

{% block body %}

{% if not post.isPublic %}
    <div class="alert alert-danger alert-fixed">
        <button type="button" class="close" data-dismiss="alert"
                aria-label="{{ 'message_close'|trans({}, 'SonataNewsBundle') }}"
        >&times;</button>
        <i class="fa fa-eye-slash" aria-hidden="true"></i> {{ 'post_is_disabled'|trans({}, 'SonataNewsBundle') }}
    </div>
{% endif %}

<section class="clean-block">
    <div class="container">
    <div class="block-heading">
            
            
            <div class="section-title">


            </div>
    </div>
    <div class="main-content">

    <!-- Begin Article
================================================== -->
<div class="container">
    <div class="row">

        <!-- Post Share -->
    <div class="col-md-2 pl-0">
        <div class="share sticky-top sticky-top-offset">
            <p>
                Share
            </p>
            <ul>
                <li class="ml-1 mr-1">
                    <a target="_blank" href="https://twitter.com/intent/tweet?text={{ post.title }}&amp;url={{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                        <i class="fa fa-twitter"></i>
                    </a>
                </li>

                <li class="ml-1 mr-1">
                    <a target="_blank" href="https://facebook.com/sharer.php?u={{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                        <i class="fa fa-facebook-f"></i>
                    </a>
                </li>

                <li class="ml-1 mr-1">
                    <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&amp;url={{ url('sonata_news_view', { 'permalink': sonata_news_permalink(post) }) }}" onclick="window.open(this.href, 'width=550,height=435');return false;">
                        <i class="fa fa-linkedin"></i>
                    </a>
                </li>

            </ul>
            
            <div class="sep">
            </div>
            <ul>
                <li>
                <a class="small smoothscroll" href="#comments">{{ post.comments | length}} Comments</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="col-md-9 flex-first flex-md-unordered">
            <div class="mainheading">

                <!-- Author Box -->
                
                {% include '@SyliusShop/Common/user_box.html.twig' with {
                    'user' : post.author,
                    'avatar' : 'avatar'
                } %}

                <!-- Post Title -->
                <h1 class="posttitle">{{ post.title }}</h1>
        </div>
                    
            <div id="article_image_hidden" class="d-none">
                {% media post.image, 'wide' %}
            </div>
            <div id="article_image" class="mx-auto">

            </div>
            <script>
                var article_image_src = $('#article_image_hidden > img').attr('src');
                $("#article_image").css('background-image','url("'+ article_image_src +'")');
                $("#article_image").css('background-size','contain');
                 $("#article_image").css('background-position','center');
                $("#article_image").css('background-repeat','no-repeat');
            </script>
            
            <!-- End Featured Image -->

            <!-- Post Content -->
            <div class="article-post">
                {{ post.content|raw }}
            </div>
            

            <!-- Post Date -->
            <p>
            <small>
                <span class="post-date"><time class="post-date" datetime="{{ post.publicationDateStart | date("Y-m-d") }}">{{ post.publicationDateStart | format_date }}</time></span>           
                
                </small>
            </p>

            <a id="comments">
            </a>
            <!-- Post Tags -->
            <div class="after-post-tags">
                <ul class="tags">
                    {% for tag in post.tags %}
                    <li>
                        <a class="smoothscroll" href="{{ url('sonata_news_tag', { 'tag': tag.slug } ) }}">{{ tag.name }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        

            {% if post.iscommentable %}
                {{ render(controller('Application\\Sonata\\NewsBundle\\Action\\CreateCommentFormAction', {
                    'postId': post.id,
                    'form': form
                })) }}
            {% else %}
                <div>
                    {{ 'message_comments_are_closed'|trans({}, 'SonataNewsBundle') }}
                </div>
            {% endif %}

            {{ render(controller('ApplicationSonataNewsBundle:Post:comments', {'postId': post.id})) }}
            
        </div>
    </div>

</section>

{% endblock %}